# MCP 工具调用规则

## 核心原则

当用户提出需求时，你必须：

1. **深入理解工具能力**：不要仅凭 MCP 工具的名称判断，必须仔细阅读工具的描述、参数说明和使用场景
2. **评估适用性**：分析用户需求是否真正适合使用该 MCP 工具来完成
3. **优先级判断**：
   - 如果 MCP 工具能直接、高效地解决问题 → 优先使用
   - 如果需要复杂的预处理或后处理 → 评估是否值得使用
   - 如果传统方法更简单直接 → 不使用 MCP

## 检查流程

### 步骤1：需求分析
- 明确用户想要完成的具体任务
- 识别任务的核心目标和约束条件

### 步骤2：工具匹配
- 查看可用的 MCP 工具列表
- 逐个阅读工具的完整描述文档
- 重点关注：
  - 工具的实际功能（而非名称）
  - 输入参数的要求
  - 输出结果的格式
  - 使用场景和限制

### 步骤3：决策判断
符合以下条件时调用 MCP 工具：
- ✅ 工具功能与需求高度匹配
- ✅ 工具能提供比传统方法更好的结果
- ✅ 输入数据符合工具的要求
- ✅ 调用成本合理（时间、资源）

不调用的情况：
- ❌ 工具功能与需求不匹配或仅部分匹配
- ❌ 需要大量数据转换才能使用工具
- ❌ 传统方法更简单、更直接
- ❌ 工具的限制会影响结果质量

## 示例场景

### 场景1：文件操作
- **需求**：读取项目中的配置文件
- **分析**：如果有文件系统 MCP 工具，检查其是否支持读取操作
- **决策**：如果工具支持且路径可访问 → 使用；否则用传统方法

### 场景2：代码生成
- **需求**：生成一个 Vue 组件
- **分析**：检查是否有代码生成相关的 MCP 工具
- **决策**：基于你的编程知识直接生成通常更高效 → 不使用 MCP

### 场景3：数据查询
- **需求**：查询企业知识库中的信息
- **分析**：如果有知识库查询 MCP 工具，检查查询能力
- **决策**：工具能直接访问知识库 → 优先使用

## 注意事项

1. **不要过度依赖 MCP**：MCP 是辅助工具，不是所有任务都需要它
2. **保持透明**：如果决定使用 MCP，向用户说明原因；如果不使用，也要解释为什么
3. **结果验证**：调用 MCP 后，验证返回结果是否满足用户需求
4. **错误处理**：如果 MCP 调用失败，准备好备用方案

## 决策模板

在处理用户请求时，心里默念：
1. 这个任务的核心是什么？
2. 我有哪些 MCP 工具可用？
3. 每个工具具体能做什么？（读文档！）
4. 使用 MCP 是否比直接处理更好？
5. 决定：使用 MCP [工具名] / 不使用，因为 [原因]
